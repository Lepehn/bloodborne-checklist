<html lang="en">
  <head>
    <meta name="google-site-verification" content="TM2JLp2z2ivvAbxCRiY7ekyg7shRkm4LJ23ywpbje1U" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bloodborne Checklist</title>
    <style>
      /* Base Styles */
      body {
        font-family: sans-serif;
        margin: 20px;
        background: #121212;
        color: #ddd;
      }

      h1 {
        text-align: center;
        margin: 0 auto 20px;
        max-width: 1280px;
        border-radius: 8px;
      }

      /* Container & Layout */
      .content-container {
        position: relative;
        max-width: 1280px;
        margin: 60px auto 0;
      }

      /* Menu */
      .menu {
        position: absolute;
        top: -60px;
        left: 0;
      }

      .menu-button {
        background: #212121;
        border: 0px solid #444;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 8px;
      }

      .dropdown {
        display: none;
        position: absolute;
        left: 0;
        background: #383838;
        border: 0px solid #444;
        border-radius: 8px;
        min-width: 160px;
        z-index: 1;
      }

      .dropdown div {
        padding: 10px;
        cursor: pointer;
      }

      .dropdown div:hover {
        background: #383838;
        border-radius: 8px;
        color: #f7bf00;
      }

      /* Content */
      .content {
        display: none;
        border: 0px solid #444;
        padding: 20px;
        background: #212121;
        border-radius: 8px;
        max-width: 1280px;
        margin-left: auto;
        margin-right: auto;
      }

      .content.active {
        display: block;
      }

      .content ul {
        color: #a0a0a0;
      }

      /* List & Checkbox */
      ul {
        list-style: none;
        padding: 0;
      }

      li {
        margin: 5px 0;
      }

      input[type="checkbox"]:checked + label {
        text-decoration: line-through;
        color: #555;
      }

      /* Tags */
      .tag {
        font-size: 0.9em;
        padding: 4px 8px;
        border-radius: 8px;
        display: inline-block;
        margin-left: 10px;
        color: #121212;
      }

      .tagRequired {
        background: #ff8a80;
      }
      .tagOptional {
        background: #d8d8d4;
      }
      .tagGiver {
        background: #80d8ff;
      }

      .tagNote {
        color: #aaa;
        background: #1a1a1a;
        padding: 4px 8px;
        border-radius: 8px;
        display: block;
        margin-left: 20px;
        margin-top: 4px;
        width: fit-content;
        max-width: 100%;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      .tagDLC {
        background: #f7bf00;
      }

      /* Layout with Sidebar */
      .content-container {
        display: flex;
        gap: 20px;
        max-width: 1280px;
        margin: 60px auto 0;
      }

      /* Sidebar Styling */
      .sidebar {
        text-align: center;
        background: #212121;
        border-radius: 8px;
        padding: 20px;
        width: 324;
        height: 496;
        flex-shrink: 0;
        color: #ccc;
        font-size: 0.95em;
        margin-bottom: 20px;
      }

      .sidebar h3 {
        margin-top: 20;
        color: #a0a0a0;
      }

      .sidebar a {
        color: #88c0d0;
        text-decoration: none;
      }
      .sidebar a:hover {
        text-decoration: underline;
      }

      .profile-bg {
        width: 100%;
        height: 100%;
        background-image: url("https://images.igdb.com/igdb/image/upload/t_cover_big/co1rba.webp");
        background-size: 100% 100%;
        background-repeat: no-repeat;
        background-position: center;
        border-radius: 8px;
      }

      .tab-box {
        background: #212121;
        border-radius: 8px;
        padding: 10px;
      }

      .tab-box2 {
        background: #212121;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 20px;
      }

      .tab-buttons {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .tab-buttons2 {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
      }

      .tab-button {
        padding: 10px;
        background: #2a2a2a;
        color: #ccc;
        border-radius: 6px;
        text-align: center;
        cursor: pointer;
        transition: background 0.2s;
      }

      .tab-button:hover,
      .tab-button.active {
        background: #383838;
        color: #f7bf00;
      }

      .scrollable-list {
        margin-top: 12px;
        max-height: 400px; /* Adjust height as needed */
        overflow-y: auto;
        padding-right: 8px; /* Avoid cutting off scrollbar */
        scrollbar-color: #383838 #1a1a1a;
      }

      /* Ensure content fills remaining space */
      .content-section {
        flex-grow: 1;
      }
    </style>
  </head>
  <template id="github-link-template-faq">
    <a href="https://github.com/Lepehn/bloodborne-checklist" target="_blank" style="color: #88c0d0; text-decoration: none;">
      GitHub repository
    </a>
  </template>
  <template id="github-link-template-footer">
    <a href="https://github.com/Lepehn/bloodborne-checklist" target="_blank" style="color: #88c0d0; text-decoration: none;">
      report an issue on GitHub
    </a>
  </template>
  <body>
    <h1>Bloodborne Checklist</h1>
    <div class="content-container">
      <div class="sidebar-wrapper">
        <div class="sidebar">
          <div class="profile-bg"></div>
        </div>
        <div class="tab-sidebar">
          <div class="tab-box">
            <div class="tab-buttons">
              <div class="tab-button" data-target="faq">FAQ</div>
            </div>
          </div>
        </div>
      </div>
      <div class="content-section">
        <div class="tab-box2">
          <div class="tab-buttons2">
            <div class="tab-button" data-target="baseGameBoss">Bosses</div>
          </div>
        </div>
        
        <!-- Base Game Bosses -->
        <div class="content active" id="baseGameBoss">
          <h2>Bosses</h2>
          <div class="progress" id="baseGame-Boss-Progress">Completed 0 / 0</div>
          <div class="scrollable-list">
            <ul id="baseGame-Bosses"></ul>
          </div>
        </div>

        <!-- FAQ -->
        <div class="content" id="faq">
          <h3>FAQ</h3>
          <p>This project was built by a fan and is inspired by similar checklists for other games like Dark Souls.</p>
          <p>
            <strong>I have feedback, how can I contribute?</strong><br />
            You can visit the <span id="faq-link-container"></span> and report Issues or create a fork and submit a Pull Request.
          </p>
          <p>
            <strong>Is this a guide?</strong><br />
            No, this is not a full walkthrough or guide. It simply helps you stay organized while playing by letting you check off content as you complete it.
          </p>
          <p>
            <strong>How does the checklist status get saved?</strong><br />
            Your progress is saved locally in your browser using localStorage. This means your checklist will stay saved as long as you don’t clear your browser data.
          </p>
        </div>
      </div>
    </div>

    <!-- Script -->
    <script>
      document.querySelectorAll(".tab-button").forEach((button) => {
        button.addEventListener("click", () => {
          // Remove active class from all buttons
          document.querySelectorAll(".tab-button").forEach((btn) => btn.classList.remove("active"));

          // Add active class to clicked button
          button.classList.add("active");

          // Switch tab content
          document.querySelectorAll(".content").forEach((c) => c.classList.remove("active"));
          document.getElementById(button.dataset.target).classList.add("active");
        });
      });
      
      const baseGameBosses = [
        {title: "Cleric Beast", tag: "Optional"},
        {title: "Father Gascoigne", tag: "Required"},
        {title: "Blood-Starved Beast", tag: "Optional"},
        {title: "Witches of Hemwick", tag: "Optional"},
        {title: "Darkbeast Paarl", tag: "Optional"},
        {title: "Vicar Amelia", tag: "Required"},
        {title: "Shadows of Yharnam", tag: "Required"},
        {title: "Martyr Logarius", tag: "Optional"},
        {title: "Amygdala", tag: "Optional"},
        {title: "Rom, the Vacuous Spider", tag: "Required"},
        {title: "The One Reborn", tag: "Required"},
        {title: "Micolash, Host of the Nightmare", tag: "Required"},
        {title: "Celestial Emissary", tag: "Optional"},
        {title: "Ebrietas, Daughter of the Cosmos", tag: "Optional"},
        {title: "Mergo's Wet Nurse", tag: "Required"},
        {title: "Gehrman, the First Hunter", tag: "Optional"},
        {title: "Moon Presence", tag: "Optional"},
      ];

      function createTag(text, className) {
        const span = document.createElement("span");
        span.className = `tag ${className}`;
        span.textContent = text;
        return span;
      }

      function createChecklistItem(item, type, container) {
        const id = `${type}-${item.title.replace(/\s+/g, "-").toLowerCase()}`;
        const li = document.createElement("li");

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = id;
        checkbox.checked = localStorage.getItem(id) === "true";
        const progressIdMap = {
          "baseGame-Bosses": "baseGame-Boss-Progress"
        };
        checkbox.addEventListener("change", () => {
          localStorage.setItem(id, checkbox.checked);
          const progressId = progressIdMap[container.id];
          if (progressId) updateProgress(progressId, type);
        });

        const label = document.createElement("label");
        label.setAttribute("for", id);
        label.textContent = ` ${item.title}`;

        li.appendChild(checkbox);
        li.appendChild(label);

        if (item.giver) li.appendChild(createTag(item.giver, "tagGiver"));
        if (item.note) li.appendChild(createTag(item.note, "tagNote"));

        if (type === "boss") {
          const className = item.tag === "Required" ? "tagRequired" : "tagOptional";
          li.appendChild(createTag(item.tag, className));
        }

        if (type === "weapon") {
          const tags = Array.isArray(item.tag) ? item.tag : [item.tag];
          tags.forEach((t) => {
            if (!t) return;
            const className = `tag${t.replace(/\s+/g, "")}`;
            li.appendChild(createTag(t, className));
          });
        }

        container.appendChild(li);
        return checkbox;
      }

      // Update the progress text for a checklist
      function updateProgress(progressId, type) {
        const progressEl = document.getElementById(progressId);
        if (!progressEl) return;

        // Get the related list by converting progressId to listId
        // e.g. main-progress → main-quests, boss-progress → baseGame-Bosses, weapon-progress → weapons
        let listId;
        if (progressId === "baseGame-Boss-Progress") listId = "baseGame-Bosses";
        else return;

        const list = document.getElementById(listId);
        const checkboxes = list.querySelectorAll("input[type=checkbox]");

        let completed = 0;
        checkboxes.forEach((cb) => {
          if (cb.checked) completed++;
        });

        progressEl.textContent = `Completed ${completed} / ${checkboxes.length}`;
      }

      const baseGameBossList = document.getElementById("baseGame-Bosses");
      baseGameBosses.forEach(b => createChecklistItem(b, 'boss', baseGameBossList));
      updateProgress('baseGame-Boss-Progress', 'boss');

      window.addEventListener("DOMContentLoaded", () => {
        const faqTemplate = document.getElementById("github-link-template-faq");
        const footerTemplate = document.getElementById("github-link-template-footer");

        // Clone templates
        const faqClone = faqTemplate.content.cloneNode(true);
        const footerClone = footerTemplate.content.cloneNode(true);

        // Insert into containers
        document.getElementById("faq-link-container").appendChild(faqClone);
        document.getElementById("footer-link-container").appendChild(footerClone);
      });
    </script>

    <!-- Footer -->
    <footer style="text-align: center; margin-top: 40px; font-size: 0.9em; color: #aaa;">Check out the project or <span id="footer-link-container"></span>.</footer>
  </body>
</html>
